# üìã Requirements Specification

## Web3News - Blockchain Content Aggregator

**Created:** 2025-11-07  
**Plan Agent:** Strategic Project Manager  
**Status:** ‚úÖ Complete  
**Next Agent:** UX Agent (`/ux`)

---

## üìä REQUIREMENTS OVERVIEW

**Total Requirements:** 27 requirements (20 functional + 7 non-functional)  
**Total User Stories:** 15 comprehensive user stories  
**Priority Distribution:**

- Must Have: 12 requirements
- Should Have: 8 requirements
- Could Have: 7 requirements

---

## üéØ FUNCTIONAL REQUIREMENTS

### FR-001: Content Aggregation System

**Priority:** Must Have  
**Phase:** MVP (Week 1-4)  
**RICE Score:** 8.5

**Description:**
Aggregate content from 30+ sources (tech, crypto, social news, general news) using client-side fetching with IndexedDB caching.

**Requirements:**

- Aggregate from 15+ sources (MVP): Hacker News, Product Hunt, GitHub, Reddit, Medium, CoinDesk, CoinTelegraph, Decrypt, Bitcoin Magazine, The Block, CoinGecko, CryptoCompare, CoinCap, Messari
- Client-side fetching (no backend servers)
- IndexedDB caching (30-min TTL, 2,000 article limit)
- Deduplication by URL hash
- Parallel fetching (Promise.all)
- Real-time updates (30-min cache refresh)

**Acceptance Criteria:**

- ‚úÖ 15+ sources aggregating successfully
- ‚úÖ 5,000+ articles cached in IndexedDB
- ‚úÖ Deduplication working (no duplicate articles)
- ‚úÖ Cache refresh every 30 minutes
- ‚úÖ Error handling for failed API calls

**User Story:** US-001

---

### FR-002: Authentication System

**Priority:** Must Have  
**Phase:** MVP (Week 2-3)  
**RICE Score:** 9.0

**Description:**
Reown AppKit social login with ERC-4337 smart account creation and Clerk user management.

**Requirements:**

- Reown AppKit social login (Google, Twitter, Email, Discord)
- ERC-4337 smart account creation (automatic)
- Clerk user management (metadata storage)
- Email verification (magic links)
- Multi-chain wallet support (15+ chains)
- Built-in on-ramp (buy USDT with credit card)

**Acceptance Criteria:**

- ‚úÖ Social login working (Google, Twitter, Email)
- ‚úÖ Smart account created automatically
- ‚úÖ Clerk user created in background
- ‚úÖ Email verification sent
- ‚úÖ Multi-chain wallet support

**User Story:** US-002

---

### FR-003: Advertisement Auction System

**Priority:** Must Have  
**Phase:** MVP (Week 5-6)  
**RICE Score:** 7.5

**Description:**
Smart contract-based ad auctions with transparent bidding and tenure leasing.

**Requirements:**

- Smart contract (AdPaymentContract.sol)
- Participation fee: 1 USDT (non-refundable)
- Minimum bid increments: 5% over previous bid
- Tenure options: 1 week, 2 weeks, 1 month, 3 months (10% discount), 6 months (20% discount)
- Auto-scheduling: New auction opens 24 hours before lease expires
- Ad types: Banner (970x250, 300x250, 728x90, 320x100), Sponsored Posts, Promoted Links
- Minimum bids: Homepage Banner (100 USDT/week), Category Pages (50 USDT/week), Article Pages (20 USDT/week), Sponsored Posts (200 USDT/week)

**Acceptance Criteria:**

- ‚úÖ Smart contract deployed (testnet)
- ‚úÖ Auction UI functional
- ‚úÖ Participation fee payment working
- ‚úÖ Bidding system working (5% increment enforced)
- ‚úÖ Auto-scheduling working (24 hours before expiry)

**User Story:** US-003

---

### FR-004: Points Earning System

**Priority:** Must Have  
**Phase:** MVP (Week 4-5)  
**RICE Score:** 8.0

**Description:**
Gamified points system rewarding user engagement and quality contributions.

**Requirements:**

- Submit quality content (10+ upvotes): 1,000 points
- Receive upvote: 10 points
- Quality comment (5+ upvotes): 50 points
- Daily login streak: 20 points/day (max 100-day streak bonus)
- Share article (UTM tracked): 5 points
- Complete profile: 500 points (one-time)
- Refer new user: 2,000 points (when referral transacts)
- Subscribe to ad slot: 10 points (one-time)

**Acceptance Criteria:**

- ‚úÖ Points earned for submissions (10+ upvotes)
- ‚úÖ Points earned for upvotes (10 points each)
- ‚úÖ Points earned for comments (5+ upvotes)
- ‚úÖ Daily login streak tracked (20 points/day)
- ‚úÖ Points balance displayed in UI

**User Story:** US-004

---

### FR-005: Points ‚Üí USDT Conversion

**Priority:** Must Have  
**Phase:** MVP (Week 6-7)  
**RICE Score:** 8.5

**Description:**
Convert earned points to USDT with conversion fees and limits.

**Requirements:**

- Conversion ratio: 1,000 points = 1 USDT (adjustable via DAO)
- Conversion fee: 1%
- Minimum: 100,000 points (100 USDT gross ‚Üí 99 USDT net)
- Daily limit: 500,000 points max per user
- Cooldown: 7-day waiting period between conversions
- Withdrawal fee: 1% + gas
- Minimum withdrawal: 10 USDT

**Acceptance Criteria:**

- ‚úÖ Conversion ratio working (1,000 points = 1 USDT)
- ‚úÖ Conversion fee deducted (1%)
- ‚úÖ Minimum enforced (100,000 points)
- ‚úÖ Daily limit enforced (500,000 points)
- ‚úÖ Cooldown enforced (7 days)

**User Story:** US-004

---

### FR-006: PWA Installation

**Priority:** Must Have  
**Phase:** MVP (Week 1-2)  
**RICE Score:** 9.0

**Description:**
Progressive Web App installable on iOS, Android, and Desktop with offline support.

**Requirements:**

- PWA manifest (installable on iOS, Android, Desktop)
- Service Worker (offline support, caching)
- Push notifications (Web Push API)
- Mobile-optimized UI
- Offline queue for pending actions

**Acceptance Criteria:**

- ‚úÖ PWA manifest configured
- ‚úÖ Service Worker caches static assets + last 100 articles
- ‚úÖ Install prompt appears on mobile browsers
- ‚úÖ Push notifications work
- ‚úÖ Offline functionality working

**User Story:** US-005

---

### FR-007: Reader View Mode

**Priority:** Should Have  
**Phase:** MVP (Week 2-3)  
**RICE Score:** 7.0

**Description:**
Distraction-free reading mode with adjustable settings.

**Requirements:**

- Reader view button on article cards
- Clean content extraction (@mozilla/readability)
- Adjustable font size, line height
- Dark mode optimized
- Reading progress bar
- Estimated read time

**Acceptance Criteria:**

- ‚úÖ Reader view functional
- ‚úÖ Content extraction working (@mozilla/readability)
- ‚úÖ Font size adjustable
- ‚úÖ Dark mode optimized
- ‚úÖ Reading progress displayed

**User Story:** US-006

---

### FR-008: Social Sharing

**Priority:** Should Have  
**Phase:** MVP (Week 3-4)  
**RICE Score:** 6.5

**Description:**
Share articles to social media with referral tracking.

**Requirements:**

- Web Share API (native browser)
- Share to Twitter, Facebook, LinkedIn, Telegram, WhatsApp
- Referral tracking (UTM parameters)
- Award 5 points for sharing

**Acceptance Criteria:**

- ‚úÖ Web Share API working
- ‚úÖ Share to social media functional
- ‚úÖ Referral tracking working (UTM parameters)
- ‚úÖ Points awarded for sharing (5 points)

**User Story:** US-007

---

### FR-009: Curated Lists

**Priority:** Should Have  
**Phase:** MVP (Week 4-5)  
**RICE Score:** 7.0

**Description:**
User-created lists for organizing and sharing favorite articles.

**Requirements:**

- Create public/private lists
- Add articles to lists
- Subscribe to other users' lists
- Points rewards (100 points for creating list)

**Acceptance Criteria:**

- ‚úÖ Create lists functional (public/private)
- ‚úÖ Add articles to lists working
- ‚úÖ Subscribe to lists working
- ‚úÖ Points awarded (100 points for creating list)

**User Story:** US-008

---

### FR-010: Social Features

**Priority:** Should Have  
**Phase:** Beta (Week 9-10)  
**RICE Score:** 7.5

**Description:**
Follow users, like articles, and send direct messages.

**Requirements:**

- Follow/unfollow users
- Like articles (award 10 points to submitter)
- Direct messages (Supabase Realtime)
- Message notifications (Web Push API)
- Following feed (see activity from followed users)
- "Liked Articles" page

**Acceptance Criteria:**

- ‚úÖ Follow/unfollow working
- ‚úÖ Like articles working (10 points awarded)
- ‚úÖ Direct messages working (Supabase Realtime)
- ‚úÖ Message notifications working (Web Push API)
- ‚úÖ Following feed functional

**User Story:** US-009

---

### FR-011: DAO Governance

**Priority:** Should Have  
**Phase:** Beta (Week 10-11)  
**RICE Score:** 7.5

**Description:**
Meritocratic voting system for community decision-making.

**Requirements:**

- Proposal creation (costs 1,000 points)
- Voting categories: Content Moderation, Economic Policy, Feature Prioritization, Treasury Spending, Ad Slot Policies, Partnership Decisions
- Meritocratic voting power (earn power through contributions)
- Proposal execution (51% + 10% quorum)
- Governance rewards

**Acceptance Criteria:**

- ‚úÖ Proposal creation working (costs 1,000 points)
- ‚úÖ Voting functional (meritocratic power)
- ‚úÖ Proposal execution working (51% + 10% quorum)
- ‚úÖ Governance rewards distributed

**User Story:** US-010

---

### FR-012: AI Translation

**Priority:** Could Have  
**Phase:** Beta (Week 7-8)  
**RICE Score:** 6.0

**Description:**
One-click translation to 100+ languages using Google Translate API.

**Requirements:**

- Google Translate API (FREE 500k chars/month)
- One-click translation (100+ languages)
- Translation caching (IndexedDB)
- Toggle original/translated view

**Acceptance Criteria:**

- ‚úÖ Translation working (100+ languages)
- ‚úÖ Translation cached (no repeat API calls)
- ‚úÖ Toggle original/translated view working

**User Story:** US-011

---

### FR-013: AI Summaries

**Priority:** Could Have  
**Phase:** Beta (Week 7-8)  
**RICE Score:** 6.0

**Description:**
One-click article summarization using Hugging Face or OpenAI API.

**Requirements:**

- Hugging Face API (FREE) or OpenAI ($5/month)
- One-click article summarization (3 sentences)
- Summary caching (IndexedDB)
- Premium feature (unlimited summaries)

**Acceptance Criteria:**

- ‚úÖ Summarization working (3 sentences)
- ‚úÖ Summary cached (no repeat API calls)
- ‚úÖ Premium feature enforced (unlimited summaries)

**User Story:** US-012

---

### FR-014: Video Content

**Priority:** Could Have  
**Phase:** Beta (Week 8-9)  
**RICE Score:** 6.5

**Description:**
Aggregate and display YouTube crypto video content.

**Requirements:**

- YouTube Data API v3 (FREE 10k quota/day)
- Crypto video channels (Coin Bureau, Altcoin Daily, Benjamin Cowen)
- Embedded video player
- Video content tabs

**Acceptance Criteria:**

- ‚úÖ YouTube videos aggregating
- ‚úÖ Video player embedded
- ‚úÖ Video content tabs functional

**User Story:** US-013

---

### FR-015: Podcast Support

**Priority:** Could Have  
**Phase:** Beta (Week 9-10)  
**RICE Score:** 6.0

**Description:**
Aggregate and play podcast episodes from crypto podcasts.

**Requirements:**

- Podcast RSS feeds (Unchained, Bankless, The Defiant)
- HTML5 audio player
- Podcast content tabs
- Episode bookmarks

**Acceptance Criteria:**

- ‚úÖ Podcast RSS feeds parsing
- ‚úÖ Audio player functional
- ‚úÖ Podcast content tabs working

---

### FR-016: Dune Analytics Dashboard

**Priority:** Should Have  
**Phase:** Beta (Week 11-12)  
**RICE Score:** 7.0

**Description:**
Embed Dune Analytics dashboard for on-chain metrics.

**Requirements:**

- Dune Analytics dashboard embed
- On-chain metrics (ads, subscriptions, treasury)
- Public stats widget (free)
- Premium full dashboard (paid)

**Acceptance Criteria:**

- ‚úÖ Dune Analytics dashboard embedded
- ‚úÖ On-chain metrics displayed
- ‚úÖ Public stats widget functional

---

### FR-017: Subscription System

**Priority:** Must Have  
**Phase:** Production (Week 13-14)  
**RICE Score:** 8.0

**Description:**
Pro and Premium subscription tiers with on-chain payments.

**Requirements:**

- Pro tier: 30 USDT/month
- Premium tier: 100 USDT/month
- Smart contract payments (on-chain verification)
- Clerk metadata storage (subscription status)
- Features: Ad-free, unlimited bookmarks, AI recommendations, enhanced voting power

**Acceptance Criteria:**

- ‚úÖ Subscription tiers functional (Pro + Premium)
- ‚úÖ Smart contract payments working
- ‚úÖ Subscription status stored in Clerk metadata
- ‚úÖ Features unlocked based on tier

**User Story:** US-014

---

### FR-018: AI Recommendations

**Priority:** Should Have  
**Phase:** Production (Week 15-16)  
**RICE Score:** 7.5

**Description:**
Personalized content recommendations using OpenAI Embeddings API.

**Requirements:**

- OpenAI Embeddings API ($0.08/month for 1k users)
- Personalized feed (collaborative filtering)
- Content-based recommendations
- Premium feature (unlimited recommendations)

**Acceptance Criteria:**

- ‚úÖ AI recommendations working
- ‚úÖ Personalized feed functional
- ‚úÖ Premium feature enforced (unlimited recommendations)

**User Story:** US-015

---

### FR-019: Multi-Language Support

**Priority:** Should Have  
**Phase:** Production (Week 14-15)  
**RICE Score:** 7.0

**Description:**
Support for English and Chinese (Simplified + Traditional).

**Requirements:**

- English (primary)
- Chinese (‰∏≠Êñá) - Simplified + Traditional
- i18n framework (next-intl)
- Language switcher (UI)

**Acceptance Criteria:**

- ‚úÖ English + Chinese support working
- ‚úÖ Language switcher functional
- ‚úÖ UI translated (all text)

---

### FR-020: Mainnet Deployment

**Priority:** Must Have  
**Phase:** Production (Week 15-16)  
**RICE Score:** 8.5

**Description:**
Deploy smart contracts to 6 mainnets with security audit.

**Requirements:**

- Deploy smart contracts to 6 mainnets:
  - Ethereum, Polygon, BSC, Arbitrum, Optimism, Base
- Testnet testing complete
- Security audit (optional, $10k-15k)
- Production monitoring

**Acceptance Criteria:**

- ‚úÖ Smart contracts deployed (6 mainnets √ó 3 contracts = 18 deployments)
- ‚úÖ Testnet testing complete
- ‚úÖ Security audit passed (if budget allows)
- ‚úÖ Production monitoring active

---

## üõ°Ô∏è NON-FUNCTIONAL REQUIREMENTS

### NFR-001: Performance Targets

**Priority:** Must Have  
**Phase:** All phases

**Requirements:**

- First Contentful Paint (FCP): < 1.5s
- Time to Interactive (TTI): < 3.5s
- Largest Contentful Paint (LCP): < 2.5s
- Cumulative Layout Shift (CLS): < 0.1
- Lighthouse Score: > 95 (all categories)

**Acceptance Criteria:**

- ‚úÖ FCP < 1.5s
- ‚úÖ TTI < 3.5s
- ‚úÖ LCP < 2.5s
- ‚úÖ CLS < 0.1
- ‚úÖ Lighthouse Score > 95

---

### NFR-002: Scalability

**Priority:** Must Have  
**Phase:** MVP+

**Requirements:**

- Handle 10,000 DAU on free tiers
- 100,000+ articles cached per user
- Infinite scroll with virtual scrolling
- IndexedDB auto-cleanup (keep last 30 days)

**Acceptance Criteria:**

- ‚úÖ 10,000 DAU supported
- ‚úÖ 100,000+ articles cached
- ‚úÖ Virtual scrolling working
- ‚úÖ Auto-cleanup functional (30 days)

---

### NFR-003: Security

**Priority:** Must Have  
**Phase:** All phases

**Requirements:**

- Row Level Security (RLS) policies in Supabase
- Content Security Policy (CSP) headers
- Smart contract audits (Slither, Mythril, professional audit)
- Rate limiting (client-side, 10 requests/min per source)
- OWASP compliance

**Acceptance Criteria:**

- ‚úÖ RLS policies configured
- ‚úÖ CSP headers set
- ‚úÖ Smart contracts audited
- ‚úÖ Rate limiting enforced
- ‚úÖ OWASP compliant

---

### NFR-004: Accessibility

**Priority:** Must Have  
**Phase:** MVP+

**Requirements:**

- WCAG 2.1 AA compliant
- Keyboard navigation
- Screen reader support
- Color contrast ratios > 4.5:1
- Alt text for all images

**Acceptance Criteria:**

- ‚úÖ WCAG 2.1 AA compliant
- ‚úÖ Keyboard navigation working
- ‚úÖ Screen reader support
- ‚úÖ Color contrast > 4.5:1
- ‚úÖ Alt text for all images

---

### NFR-005: Browser Compatibility

**Priority:** Must Have  
**Phase:** MVP+

**Requirements:**

- Chrome/Edge: Last 2 versions
- Firefox: Last 2 versions
- Safari (desktop + iOS): Last 2 versions
- Mobile: iOS 14+, Android 10+

**Acceptance Criteria:**

- ‚úÖ Chrome/Edge compatible
- ‚úÖ Firefox compatible
- ‚úÖ Safari compatible (desktop + iOS)
- ‚úÖ Mobile compatible (iOS 14+, Android 10+)

---

### NFR-006: Offline Support

**Priority:** Must Have  
**Phase:** MVP+

**Requirements:**

- Service Worker caching (static assets + last 100 articles)
- IndexedDB persistence
- Offline queue for pending actions
- Sync when back online

**Acceptance Criteria:**

- ‚úÖ Service Worker caching working
- ‚úÖ IndexedDB persistence functional
- ‚úÖ Offline queue working
- ‚úÖ Sync on reconnect working

---

### NFR-007: Infrastructure Cost

**Priority:** Must Have  
**Phase:** MVP

**Requirements:**

- $0/month for MVP (free tier services only)
- GitHub Pages: Free (unlimited bandwidth)
- Clerk: Free (up to 10,000 MAU)
- Reown: Free (unlimited)
- Supabase: Free (500 MB limit)
- IndexedDB: Free (browser-provided)

**Acceptance Criteria:**

- ‚úÖ MVP cost = $0/month
- ‚úÖ All services on free tier
- ‚úÖ No paid services required

---

## üìä USER STORIES SUMMARY

**Total User Stories:** 15 comprehensive user stories

| Story ID | User Type          | Goal                                   | Priority | Phase      |
| -------- | ------------------ | -------------------------------------- | -------- | ---------- |
| US-001   | Crypto Enthusiast  | Read all crypto news from one platform | High     | MVP        |
| US-002   | User               | Login with Google and get Web3 wallet  | High     | MVP        |
| US-003   | Advertiser         | Participate in transparent ad auctions | High     | MVP        |
| US-004   | Content Creator    | Earn USDT for quality submissions      | High     | MVP        |
| US-005   | Mobile User        | Install app as PWA                     | High     | MVP        |
| US-006   | Reader             | Distraction-free reading mode          | Medium   | MVP        |
| US-007   | User               | Share articles to social media         | Medium   | MVP        |
| US-008   | Curator            | Create curated lists                   | Medium   | MVP        |
| US-009   | Community Member   | Follow users and like articles         | Medium   | Beta       |
| US-010   | DAO Member         | Participate in governance              | Medium   | Beta       |
| US-011   | International User | Translate articles                     | Low      | Beta       |
| US-012   | Busy Reader        | AI summaries                           | Low      | Beta       |
| US-013   | Video Consumer     | Watch crypto videos                    | Low      | Beta       |
| US-014   | Premium User       | Ad-free experience                     | High     | Production |
| US-015   | Power User         | Personalized recommendations           | Medium   | Production |

---

## ‚úÖ REQUIREMENTS COMPLETE

**Status:** ‚úÖ Requirements Specification Complete  
**Next:** Risk Register (`risk-register.md`)  
**Next Agent:** UX Agent (`/ux`) - After planning approval

**Total Requirements:** 27 (20 functional + 7 non-functional)  
**Total User Stories:** 15  
**Priority Distribution:** Must Have (12), Should Have (8), Could Have (7)
