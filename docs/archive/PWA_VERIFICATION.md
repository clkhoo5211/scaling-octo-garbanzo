# PWA Verification Guide

This guide helps you verify that your Web3News application is properly configured as a Progressive Web App (PWA).

## âœ… PWA Requirements Checklist

### 1. **Manifest File** âœ…
- **Location**: `/public/manifest.webmanifest` (development) and `/dist/manifest.webmanifest` (production)
- **Status**: âœ… Configured in `vite.config.ts` with VitePWA plugin
- **Contains**:
  - `name`: "Web3News - Decentralized News Aggregation"
  - `short_name`: "Web3News"
  - `display`: "standalone"
  - `start_url`: "/"
  - `icons`: 192x192 and 512x512 PNG icons
  - `theme_color`: "#000000"
  - `background_color`: "#000000"

### 2. **Service Worker** âœ…
- **Location**: Generated by Vite PWA plugin at `/dist/sw.js` (production)
- **Status**: âœ… Configured with `registerType: 'autoUpdate'`
- **Registration**: âœ… Handled by `ServiceWorkerRegistration` component
- **Features**:
  - Auto-update on new deployments
  - Caching strategy: CacheFirst for Google Fonts
  - Precaching for static assets

### 3. **Icons** âœ…
- **192x192**: `/public/icon-192x192.png` âœ…
- **512x512**: `/public/icon-512x512.png` âœ…
- **Apple Touch Icon**: `/public/apple-icon.png` âœ…
- **Favicon**: `/public/favicon.ico` âœ…

### 4. **HTTPS/SSL** âš ï¸
- **Development**: Works on `localhost` (HTTPS not required)
- **Production**: Required for PWA installation
- **Note**: GitHub Pages provides HTTPS automatically

### 5. **Meta Tags** âœ…
- **Viewport**: âœ… Configured in `index.html`
- **Theme Color**: âœ… `#000000` in `index.html`
- **Apple Meta Tags**: âœ… Configured for iOS

## ðŸ” How to Verify PWA Status

### Method 1: Browser DevTools (Chrome/Edge)

1. **Open DevTools** (F12 or Right-click â†’ Inspect)
2. **Go to Application Tab**
3. **Check Manifest**:
   - Click "Manifest" in the left sidebar
   - Verify all fields are populated correctly
   - Check icons are loading

4. **Check Service Worker**:
   - Click "Service Workers" in the left sidebar
   - Verify service worker is registered and active
   - Status should show "activated and is running"

5. **Check Storage**:
   - Click "Cache Storage" to see cached resources
   - Click "IndexedDB" to see offline data

### Method 2: Lighthouse Audit

1. **Open DevTools** â†’ **Lighthouse Tab**
2. **Select**:
   - âœ… Progressive Web App
   - âœ… Desktop or Mobile
3. **Click "Generate Report"**
4. **Check PWA Score**:
   - Should be 90+ for a good PWA
   - All checks should pass:
     - âœ… Manifest exists
     - âœ… Service worker registered
     - âœ… HTTPS (production)
     - âœ… Responsive design
     - âœ… Fast load times

### Method 3: Manual Installation Test

#### Desktop (Chrome/Edge):
1. Visit your website
2. Look for install icon in address bar (or menu â†’ "Install Web3News")
3. Click "Install"
4. App should open in standalone window

#### Mobile (Android Chrome):
1. Visit your website
2. Tap menu (3 dots) â†’ "Add to Home Screen"
3. App icon should appear on home screen
4. Tap icon to open in standalone mode

#### Mobile (iOS Safari):
1. Visit your website
2. Tap Share button â†’ "Add to Home Screen"
3. App icon should appear on home screen
4. Tap icon to open in standalone mode

### Method 4: Console Verification

Open browser console and run:

```javascript
// Check manifest
navigator.serviceWorker.getRegistration().then(reg => {
  console.log('Service Worker:', reg ? 'âœ… Registered' : 'âŒ Not registered');
});

// Check manifest
fetch('/manifest.webmanifest')
  .then(r => r.json())
  .then(m => console.log('Manifest:', m))
  .catch(e => console.error('Manifest error:', e));

// Check if installable
window.addEventListener('beforeinstallprompt', (e) => {
  console.log('âœ… PWA is installable!');
});
```

## ðŸ› Common Issues & Solutions

### Issue 1: Service Worker Not Registering
**Symptoms**: No service worker in DevTools â†’ Application â†’ Service Workers

**Solutions**:
- Check browser console for errors
- Verify `sw.js` exists in `dist/` folder after build
- Ensure HTTPS (or localhost) is being used
- Check `ServiceWorkerRegistration` component is rendered

### Issue 2: Manifest Not Found
**Symptoms**: 404 error for `/manifest.webmanifest`

**Solutions**:
- Verify `public/manifest.webmanifest` exists
- Check `vite.config.ts` PWA configuration
- Ensure manifest link in `index.html` is correct
- For GitHub Pages: Check basePath is correct

### Issue 3: Icons Not Loading
**Symptoms**: Icons show as broken in manifest

**Solutions**:
- Verify icon files exist in `public/` folder
- Check icon paths in manifest (should be `/icon-192x192.png`)
- For GitHub Pages: Ensure basePath is included in icon paths

### Issue 4: PWA Not Installable
**Symptoms**: No install prompt appears

**Solutions**:
- Ensure HTTPS is enabled (production)
- Check Lighthouse PWA audit for specific failures
- Verify manifest has all required fields
- Ensure service worker is active

## ðŸ“± Testing Checklist

- [ ] Manifest loads without errors
- [ ] Service worker registers successfully
- [ ] Icons display correctly
- [ ] App works offline (after first visit)
- [ ] Install prompt appears (desktop/mobile)
- [ ] App opens in standalone mode when installed
- [ ] Theme color matches design (#000000)
- [ ] App name displays correctly ("Web3News")
- [ ] Lighthouse PWA score > 90

## ðŸš€ Quick Verification Steps

1. **Build for production**: `npm run build`
2. **Preview build**: `npm run preview`
3. **Open DevTools**: Application tab â†’ Check Manifest and Service Workers
4. **Run Lighthouse**: Generate PWA audit report
5. **Test installation**: Try installing on desktop/mobile

## ðŸ“š Resources

- [Vite PWA Plugin Docs](https://vite-pwa-org.netlify.app/)
- [MDN PWA Guide](https://developer.mozilla.org/en-US/docs/Web/Progressive_Web_Apps)
- [Web.dev PWA Checklist](https://web.dev/pwa-checklist/)

